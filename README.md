# –¶–∞—Ä—å –¢–∞–∫—Å–∏ - –°–∏—Å—Ç–µ–º–∞ –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–ª—è —Ç–∞–∫—Å–∏—Å—Ç–æ–≤

–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å –∏ —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º–æ–π –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª–µ–π —Ç–∞–∫—Å–∏ —Å –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π, –≤–¥–æ—Ö–Ω–æ–≤–ª–µ–Ω–Ω–æ–π –¥—Ä–µ–≤–Ω–µ–π –≤–æ–µ–Ω–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–µ–π.

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
- [–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [–ó–∞–ø—É—Å–∫](#–∑–∞–ø—É—Å–∫)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#api-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- [–ò–µ—Ä–∞—Ä—Ö–∏—è —Ä–æ–ª–µ–π](#–∏–µ—Ä–∞—Ä—Ö–∏—è-—Ä–æ–ª–µ–π)
- [–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö](#–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö)

## üéØ –û–±–∑–æ—Ä

"–¶–∞—Ä—å –¢–∞–∫—Å–∏" - —ç—Ç–æ —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è–º–∏ –º–µ–∂–¥—É –≤–æ–¥–∏—Ç–µ–ª—è–º–∏ —Ç–∞–∫—Å–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —Ä–æ–ª–µ–π, –∫–æ–º–∞–Ω–¥–Ω—ã–º–∏ —Ä–∞—Å—á–µ—Ç–∞–º–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –∏–º–ø–æ—Ä—Ç–æ–º –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ XLSX, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π Telegram-–±–æ—Ç–∞ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–Ω–µ–ª—å—é –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–æ–π.

### –ö–ª—é—á–µ–≤—ã–µ —Ä–æ–ª–∏

- **–¶–∞—Ä—å (Tsar)** - 1 –ª–∏–¥–µ—Ä
- **–°–æ—Ç–Ω–∏–∫–∏ (Centurions)** - –¥–æ 10 –∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤
- **–î–µ—Å—è—Ç–Ω–∏–∫–∏ (Decurions)** - –¥–æ 100 –∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤ –≥—Ä—É–ø–ø
- **–í–æ–¥–∏—Ç–µ–ª–∏ (Drivers)** - –¥–æ 1000 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å

- üìä **Dashboard** - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏, –æ–±–∑–æ—Ä –∏–µ—Ä–∞—Ä—Ö–∏–∏, –∞–ª–µ—Ä—Ç—ã
- üèÜ **–†–µ–π—Ç–∏–Ω–≥–∏** - –¢–æ–ø —Å–æ—Ç–Ω–∏–∫–æ–≤ –∏ –≤–æ–¥–∏—Ç–µ–ª–µ–π —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- üë• **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏** - –û–¥–æ–±—Ä–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üìÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∑–æ–Ω–∞–º–∏** - –°–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–µ–∑–æ–Ω–æ–≤
- üìà **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ —Ç—Ä–µ–Ω–¥–æ–≤ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- üö® **–ê–Ω—Ç–∏—Ñ—Ä–æ–¥** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∞–Ω–æ–º–∞–ª–∏–π –∏ –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–∞
- üìÑ **–û—Ç—á–µ—Ç—ã** - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ —ç–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–æ–≤ –≤ XLSX
- üîî **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ Telegram –∏ WebSocket

### –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

- –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–∞–±–æ—á–∏—Ö —á–∞—Å–æ–≤ —á–µ—Ä–µ–∑ XLSX —Ñ–∞–π–ª—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–º–µ—Ä–æ–≤ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤
- –î–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å –æ–± –æ—à–∏–±–∫–∞—Ö –∏–º–ø–æ—Ä—Ç–∞
- –°–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∑–∞–ø–∏—Å–µ–π —á–∞—Å–æ–≤

### Telegram –±–æ—Ç

- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–∞–∫—Ç
- –ö–æ–º–∞–Ω–¥—ã: `/start`, `/mystats`, `/team`, `/leaderboard`
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö —Ä–æ–ª–µ–π –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è—Ö

### –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

- –ò—Ç–æ–≥–∏ —Å–µ–∑–æ–Ω–æ–≤ (–≤—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏, —Ä–æ–ª–∏, —á–∞—Å—ã, –ø—Ä–æ—Ü–µ–Ω—Ç—ã)
- –†–µ–π—Ç–∏–Ω–≥–∏ (—Ç–æ–ø-100 —Å–æ—Ç–Ω–∏–∫–æ–≤/–≤–æ–¥–∏—Ç–µ–ª–µ–π)
- –î–Ω–µ–≤–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –ø–æ –¥–∞—Ç–∞–º
- –ê–ª–µ—Ä—Ç—ã –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–∞
- –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –°–∏—Å—Ç–µ–º–∞ –∞–Ω—Ç–∏—Ñ—Ä–æ–¥–∞

- –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –≤—ã—Å–æ–∫–∏—Ö –¥–Ω–µ–≤–Ω—ã—Ö —á–∞—Å–æ–≤ (>16 —á–∞—Å–æ–≤)
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–Ω–æ–º–∞–ª—å–Ω—ã—Ö —Å–∫–∞—á–∫–æ–≤ (470% –≤—ã—à–µ –º–µ–¥–∏–∞–Ω—ã)
- –§–ª–∞–≥–∏ –ø–µ—Ä–∏–æ–¥–æ–≤ –±–µ–∑ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (>7 –¥–Ω–µ–π –Ω—É–ª–µ–≤—ã—Ö —á–∞—Å–æ–≤)
- –†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —É—Ä–æ–≤–Ω—é —Å–µ—Ä—å–µ–∑–Ω–æ—Å—Ç–∏ (low/medium/high)

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Frontend

- **React 18** —Å TypeScript
- **Vite** –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏ dev —Å–µ—Ä–≤–µ—Ä–∞
- **Wouter** –¥–ª—è —Ä–æ—É—Ç–∏–Ω–≥–∞
- **TanStack Query** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Å–µ—Ä–≤–µ—Ä–∞
- **Shadcn UI** + Radix UI –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **Tailwind CSS** –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏
- **Recharts** –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤

### Backend

- **Express.js** —Å TypeScript
- **Node.js** –≤ ESM —Ñ–æ—Ä–º–∞—Ç–µ
- **Express-session** –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **PostgreSQL** —á–µ—Ä–µ–∑ Neon serverless
- **Drizzle ORM** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- **WebSocket** –¥–ª—è real-time —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

- **Telegram Bot API** –¥–ª—è –±–æ—Ç–∞
- **XLSX** –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞/—ç–∫—Å–ø–æ—Ä—Ç–∞
- **Multer** –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 18+ –∏–ª–∏ 20+
- PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–∏–ª–∏ Neon)
- npm –∏–ª–∏ yarn

### –®–∞–≥–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone https://github.com/AlexMurashevich/Czar-Taxi.git
cd Czar-Taxi
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
npm install
```

3. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` (—Å–º. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è))

4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:
```bash
npm run db:push
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
DATABASE_URL=postgresql://user:password@host:5432/database

# Session secret (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è production)
SESSION_SECRET=your-random-secret-key-here

# Admin key (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è production)
ADMIN_KEY=your-admin-key-here

# Telegram bot (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
TELEGRAM_BOT_TOKEN=your-telegram-bot-token

# Environment
NODE_ENV=development
PORT=5000
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### DATABASE_URL
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ [Neon](https://neon.tech) –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π PostgreSQL –ë–î
- –ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PostgreSQL –ª–æ–∫–∞–ª—å–Ω–æ

#### TELEGRAM_BOT_TOKEN
1. –ù–∞–π–¥–∏—Ç–µ [@BotFather](https://t.me/botfather) –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot` –∏ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω

#### SESSION_SECRET
–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–ª—É—á–∞–π–Ω—É—é —Å—Ç—Ä–æ–∫—É:
```bash
node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
```

#### ADMIN_KEY
–í—ã–±–µ—Ä–∏—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–∞—Ä–æ–ª—å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

## üöÄ –ó–∞–ø—É—Å–∫

### Development —Ä–µ–∂–∏–º

```bash
npm run dev
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ `http://localhost:5000`

### Production —Ä–µ–∂–∏–º

```bash
# –°–±–æ—Ä–∫–∞
npm run build

# –ó–∞–ø—É—Å–∫
npm start
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ö–µ–º—ã
npm run db:push

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ö–µ–º—ã (—Å force)
npm run db:push --force

# –û—Ç–∫—Ä—ã—Ç—å Drizzle Studio
npm run db:studio
```

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
czar-taxi/
‚îú‚îÄ‚îÄ client/                 # Frontend React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/    # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui/       # Shadcn UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout/   # Layout –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Sidebar, Header)
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ */        # –î–æ–º–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/        # –°—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–æ—É—Ç–∏–Ω–≥–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/        # –ö–∞—Å—Ç–æ–º–Ω—ã–µ React —Ö—É–∫–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ lib/          # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ index.html
‚îú‚îÄ‚îÄ server/                # Backend Express API
‚îÇ   ‚îú‚îÄ‚îÄ routes.ts         # API –º–∞—Ä—à—Ä—É—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ storage.ts        # –°–ª–æ–π —Ä–∞–±–æ—Ç—ã —Å –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ services/         # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calculations.ts      # –†–∞—Å—á–µ—Ç—ã –∞–≥—Ä–µ–≥–∞—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ role-transitions.ts  # –ü–µ—Ä–µ—Ö–æ–¥—ã —Ä–æ–ª–µ–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ anti-fraud.ts        # –°–∏—Å—Ç–µ–º–∞ –∞–Ω—Ç–∏—Ñ—Ä–æ–¥–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ xlsx-processor.ts    # –û–±—Ä–∞–±–æ—Ç–∫–∞ XLSX
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ telegram-bot.ts      # Telegram –±–æ—Ç
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ analytics.ts         # –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ export.ts            # –≠–∫—Å–ø–æ—Ä—Ç XLSX
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ notifications.ts     # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ websocket.ts      # WebSocket —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îî‚îÄ‚îÄ index.ts          # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ shared/               # –û–±—â–∏–π –∫–æ–¥
‚îÇ   ‚îî‚îÄ‚îÄ schema.ts        # Drizzle —Å—Ö–µ–º–∞ –ë–î
‚îî‚îÄ‚îÄ package.json
```

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

1. –ê–¥–º–∏–Ω –∑–∞–≥—Ä—É–∂–∞–µ—Ç XLSX —Ñ–∞–π–ª —Å —á–∞—Å–∞–º–∏ —Ä–∞–±–æ—Ç—ã
2. XLSX Processor –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∏ –ø–∞—Ä—Å–∏—Ç –¥–∞–Ω–Ω—ã–µ
3. Storage —Å–æ–∑–¥–∞–µ—Ç/–æ–±–Ω–æ–≤–ª—è–µ—Ç –∑–∞–ø–∏—Å–∏ –≤ –ë–î
4. Calculations Service –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∞–≥—Ä–µ–≥–∞—Ç—ã
5. Anti-Fraud Service –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–Ω–æ–º–∞–ª–∏–∏
6. Frontend –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ TanStack Query
7. Telegram Bot –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–∞–º

## üì° API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

```
POST /api/auth/login
POST /api/auth/logout
GET  /api/auth/status
```

### Dashboard

```
GET /api/dashboard/stats
GET /api/dashboard/hierarchy-stats/:seasonId
GET /api/dashboard/waitlist-count
```

### –°–µ–∑–æ–Ω—ã

```
GET  /api/seasons
GET  /api/seasons/active
POST /api/seasons
PUT  /api/seasons/:id
POST /api/seasons/:id/close
```

### –†–µ–π—Ç–∏–Ω–≥–∏

```
GET /api/leaderboards/centurions/:seasonId/:limit
GET /api/leaderboards/drivers/:seasonId/:limit
```

### –£—á–∞—Å—Ç–Ω–∏–∫–∏

```
GET  /api/participants/waitlist
POST /api/participants/approve
POST /api/participants/block/:userId
```

### –ò–º–ø–æ—Ä—Ç

```
POST /api/imports/upload
GET  /api/imports
GET  /api/imports/:id
```

### –ò–µ—Ä–∞—Ä—Ö–∏—è

```
GET /api/hierarchy/:seasonId
```

### –ê–Ω—Ç–∏—Ñ—Ä–æ–¥

```
GET /api/fraud/alerts
```

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

```
GET /api/analytics/:seasonId
```

### –≠–∫—Å–ø–æ—Ä—Ç

```
GET /api/export/season/:seasonId
GET /api/export/leaderboard/:seasonId/:role
GET /api/export/daily/:seasonId/:date
GET /api/export/fraud-alerts
GET /api/export/user/:userId/season/:seasonId
```

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

```
GET  /api/notifications
POST /api/notifications/send
```

### –°–ª—É–∂–µ–±–Ω—ã–µ

```
POST /api/recalculate
POST /api/redistribute
POST /api/telegram/webhook
```

## üëë –ò–µ—Ä–∞—Ä—Ö–∏—è —Ä–æ–ª–µ–π

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
–¶–∞—Ä—å (1)
  ‚îî‚îÄ –°–æ—Ç–Ω–∏–∫ 1 (–∫–æ–º–∞–Ω–¥–∞ –º–∞–∫—Å 10)
      ‚îú‚îÄ –î–µ—Å—è—Ç–Ω–∏–∫ 1 (–∫–æ–º–∞–Ω–¥–∞ –º–∞–∫—Å 10)
      ‚îÇ   ‚îî‚îÄ –í–æ–¥–∏—Ç–µ–ª–∏ (–º–∞–∫—Å 10)
      ‚îî‚îÄ –î–µ—Å—è—Ç–Ω–∏–∫ 2
          ‚îî‚îÄ –í–æ–¥–∏—Ç–µ–ª–∏
```

### –†–∞—Å—á–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–õ–∏—á–Ω—ã–µ —á–∞—Å—ã** - —á–∞—Å—ã —Ä–∞–±–æ—Ç—ã —Å–∞–º–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞

**–ö–æ–º–∞–Ω–¥–Ω—ã–µ —á–∞—Å—ã** - —Å—É–º–º–∞ —á–∞—Å–æ–≤ –≤—Å–µ—Ö –ø–æ–¥—á–∏–Ω–µ–Ω–Ω—ã—Ö:
- –¶–∞—Ä—å: –≤—Å–µ —á–∞—Å—ã —Å–∏—Å—Ç–µ–º—ã
- –°–æ—Ç–Ω–∏–∫: —á–∞—Å—ã –≤—Å–µ—Ö –¥–µ—Å—è—Ç–Ω–∏–∫–æ–≤ –∏ –≤–æ–¥–∏—Ç–µ–ª–µ–π –≤ –µ–≥–æ –∫–æ–º–∞–Ω–¥–µ
- –î–µ—Å—è—Ç–Ω–∏–∫: —á–∞—Å—ã –≤—Å–µ—Ö –≤–æ–¥–∏—Ç–µ–ª–µ–π –≤ –µ–≥–æ –∫–æ–º–∞–Ω–¥–µ
- –í–æ–¥–∏—Ç–µ–ª—å: 0 (–Ω–µ—Ç –ø–æ–¥—á–∏–Ω–µ–Ω–Ω—ã—Ö)

**–ò—Ç–æ–≥–æ–≤—ã–µ —á–∞—Å—ã** = –õ–∏—á–Ω—ã–µ —á–∞—Å—ã + –ö–æ–º–∞–Ω–¥–Ω—ã–µ —á–∞—Å—ã

**–ü—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è** = (–ò—Ç–æ–≥–æ–≤—ã–µ —á–∞—Å—ã / –¶–µ–ª–µ–≤—ã–µ —á–∞—Å—ã) √ó 100%

### –ü–µ—Ä–µ—Ö–æ–¥—ã —Ä–æ–ª–µ–π

–í –∫–æ–Ω—Ü–µ —Å–µ–∑–æ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

**–ü–µ—Ä–≤—ã–π —Å–µ–∑–æ–Ω:**
- –¢–æ–ø 1% ‚Üí –¶–∞—Ä—å
- –¢–æ–ø 10% ‚Üí –°–æ—Ç–Ω–∏–∫–∏
- –¢–æ–ø 20% ‚Üí –î–µ—Å—è—Ç–Ω–∏–∫–∏
- –û—Å—Ç–∞–ª—å–Ω—ã–µ ‚Üí –í–æ–¥–∏—Ç–µ–ª–∏

**–ü–æ—Å–ª–µ–¥—É—é—â–∏–µ —Å–µ–∑–æ–Ω—ã:**
- ‚â•100% —Ü–µ–ª–∏ ‚Üí –ø–æ–≤—ã—à–µ–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å
- <50% —Ü–µ–ª–∏ ‚Üí –ø–æ–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å
- 50-99% ‚Üí —Ä–æ–ª—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

## üóÑ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

#### users
–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—á–∞—Å—Ç–Ω–∏–∫–∞—Ö
- id, phone, telegram_user_id, full_name, status, consent_at

#### seasons
–°–µ–∑–æ–Ω—ã —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π
- id, name, start_date, end_date, day_count, daily_hour_target, status

#### role_assignments
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–æ–ª–µ–π —É—á–∞—Å—Ç–Ω–∏–∫–∞–º –≤ —Å–µ–∑–æ–Ω–∞—Ö
- id, season_id, user_id, role, sotnik_id, desyatnik_id, group_index

#### hours_raw
–°—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ —Ä–∞–±–æ—á–∏—Ö —á–∞—Å–æ–≤
- id, user_id, date, hours, import_id

#### aggregates_daily
–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∞–≥—Ä–µ–≥–∞—Ç—ã
- user_id, season_id, date, personal_hours, team_hours, total_hours

#### aggregates_season
–°–µ–∑–æ–Ω–Ω—ã–µ –∞–≥—Ä–µ–≥–∞—Ç—ã
- user_id, season_id, personal_total, team_total, total_hours, target_hours, percent

#### imports
–ò—Å—Ç–æ—Ä–∏—è –∏–º–ø–æ—Ä—Ç–æ–≤
- id, filename, status, rows_processed, errors_json

#### waitlist
–û—á–µ—Ä–µ–¥—å –Ω–æ–≤—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- id, phone, telegram_user_id, full_name, created_at

#### messaging_permissions
–†–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è Telegram
- user_id, allow_messages

#### audit_logs
–ñ—É—Ä–Ω–∞–ª –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
- id, actor_id, action, entity_type, entity_id, payload_json

#### notifications
–ò—Å—Ç–æ—Ä–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- id, user_id, type, title, message, status, delivery_method

#### notification_preferences
–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- user_id, notification_type, enabled, delivery_method

## üìä –§–æ—Ä–º–∞—Ç XLSX –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–∞

| –¢–µ–ª–µ—Ñ–æ–Ω | 2025-03-01 | 2025-03-02 | 2025-03-03 | ...
|---------|------------|------------|------------|----
| +79991234567 | 8.5 | 9.0 | 7.5 | ...
| +79991234568 | 10.0 | 8.5 | 9.5 | ...

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- –ü–µ—Ä–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ (—Å + –∏–ª–∏ –±–µ–∑)
- –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏: –¥–∞—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD
- –ó–Ω–∞—á–µ–Ω–∏—è: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Å–æ–≤ (—á–∏—Å–ª–æ)
- –ü—É—Å—Ç—ã–µ —è—á–µ–π–∫–∏ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è

### –í–∞–ª–∏–¥–∞—Ü–∏—è

- –ù–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ –Ω–æ—Ä–º–∞–ª–∏–∑—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –°–æ–∑–¥–∞—é—Ç—Å—è –Ω–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- –û–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏ —á–∞—Å–æ–≤
- –î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –æ–± –æ—à–∏–±–∫–∞—Ö –≤ response

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

- Session-based –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å PostgreSQL store
- HTTP-only session cookies
- Session regeneration –ø—Ä–∏ –≤—Ö–æ–¥–µ
- Proper session destroy –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

- –í—Å–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∑–∞—â–∏—â–µ–Ω—ã `adminAuth` middleware
- ADMIN_KEY –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç
- –í development (–±–µ–∑ ADMIN_KEY) - auto-login
- –í production - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –≤–≤–æ–¥ admin key

### –ó–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö

- –í—Å–µ —ç–∫—Å–ø–æ—Ä—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- Credentials –≤–∫–ª—é—á–µ–Ω—ã –≤–æ –≤—Å–µ fetch –∑–∞–ø—Ä–æ—Å—ã
- Secure cookies –≤ production
- Validation –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –≤–∫–ª—é—á–∞–µ—Ç end-to-end —Ç–µ—Å—Ç—ã –¥–ª—è:
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (auto-login)
- –≠–∫—Å–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö (season, leaderboards, fraud)
- Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- Session management

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ Playwright –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ workflow.

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

¬© 2025 –¶–∞—Ä—å –¢–∞–∫—Å–∏. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ issues –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

## üîÑ –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π

### v1.0.0 (–û–∫—Ç—è–±—Ä—å 2025)
- ‚úÖ –ü–æ–ª–Ω–∞—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –∏–µ—Ä–∞—Ä—Ö–∏–∏ –∏ —Ä–æ–ª–µ–π
- ‚úÖ –ò–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç XLSX
- ‚úÖ Telegram –±–æ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –≥—Ä–∞—Ñ–∏–∫–∏
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –∞–Ω—Ç–∏—Ñ—Ä–æ–¥–∞
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (—á–∞—Å—Ç–∏—á–Ω–æ)
- ‚úÖ Session-based –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–æ–≤

### Roadmap
- üì± –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è
- ü§ñ ML –º–æ–¥–µ–ª–∏ –¥–ª—è –∞–Ω—Ç–∏—Ñ—Ä–æ–¥–∞
- üîî –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- üåê –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å

---

–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Ç–∞–∫—Å–æ–ø–∞—Ä–∫–æ–≤
